{{- if or (not .Site.IsServer) .Site.Params.TestTAC -}}
<script type="text/javascript">
    (tarteaucitron.job = tarteaucitron.job || []).push('myetracker');
</script>
{{- end -}}
<script src="/assets/js/bootstrap/bootstrap.min.js"></script>
<script src="/assets/js/simple/simple-lightbox.min.js"></script>
{{- if eq .Layout "search" -}}
<script src="/assets/js/fuse/fuse.min.js" type="text/javascript"></script>
<script src="/assets/js/fuse/search.js" type="text/javascript"></script>
{{- end -}}
<script >

    /* -----------------------------------------------
    --- Reduce the size of the logo when scrolling ---
    -------------------------------------------------- */
    window.onscroll = function() {
        navbarScroll()
    };

    function navbarScroll() {
        var y  = window.scrollY;
        var id = document.getElementById("main-menu");
        if (y > 10) {
          id.classList.add('small');
        } else if (y < 10) {
          id.classList.remove('small');
        }
      }

    /* --------------------------------------------
    --- Update tables                           ---
    ----------------------------------------------- */
    var matches = document.querySelectorAll("table");
    matches.forEach(
        tb => {
            tb.classList.add("table", "table-striped");
            tb.querySelector("thead").classList.add("table-dark");

            var wrapper = document.createElement('div');
            wrapper.classList.add("table-responsive-md");
            tb.parentNode.insertBefore(wrapper, tb);
            wrapper.appendChild(tb);
        }
    );

    /* --------------------------------------------
    --- Initiate the image galleries            ---
    ----------------------------------------------- */
    var matches = document.querySelectorAll(".image-gallery");
    matches.forEach(
        gal => {
            new SimpleLightbox("#" + gal.id + " a");
        }
    );
    new SimpleLightbox(".figure-img a");

    /* --------------------------------------------
    --- Update footnotes                     ---
    -------------------------------------------- */

    /* --- Update the badge (to fit with bootstrap styles) --- */
    document.querySelectorAll(".footnote-ref").forEach(
        fr => {
            fr.classList.add("badge","bg-primary");
            fr.classList.remove("footnote-ref");
            var text = fr.textContent;
            fr.textContent = "[" + text + "]";
        }
    );

    /* --- Update the backref character --- */
    /* document.querySelectorAll(".footnote-backref").forEach(
        fbr => {
            fbr.innerHTML = "(&crarr;)";
        }
    ); */

    function insertAfter(newNode, referenceNode) {
        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
    }

    /* --- Add the title --- */
    if (document.querySelector(".footnotes")) {
        var notes = document.createElement("span");
        notes.classList.add("footnotes-title");
        notes.textContent = "Notes";
        insertAfter(notes, document.querySelector(".footnotes > hr"));
    }
</script>